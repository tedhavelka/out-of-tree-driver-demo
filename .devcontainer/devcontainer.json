{
    "name": "out-of-tree-driver-demo",
    "build": {
        "dockerfile": "./Dockerfile",
        "context": "."
    },
    "features": {
        "ghcr.io/devcontainers-community/features/llvm": {
            "version": "20"
        },
        "ghcr.io/nils-geistmann/devcontainers-features/zsh:0": {},
        "ghcr.io/bascodes/devcontainer-features/usbutils:1": {},
        "ghcr.io/rocker-org/devcontainer-features/apt-packages:1": {
            // comma-separated list
            "packages": "gdb" // install gdb for local debugging
        }
    },
    "postCreateCommand": {
        "post-create": "./.devcontainer/post-create.sh"
    },
    "runArgs": [
        "--privileged",
        "--label=out-of-tree-driver-demo-devcontainer"
    ],
    "containerEnv": {
        "DISPLAY": "${localEnv:DISPLAY}",
        "SSH_AUTH_SOCK": "/ssh-agent"
    },
    "mounts": [
        "source=${localWorkspaceFolder}/docker_cache,target=/workdir,type=bind,consistency=cached",
        "source=/dev,target=/dev,type=bind"
    ],
    "workspaceMount": "source=${localWorkspaceFolder},target=/workdir/out-of-tree-driver-demo,type=bind,consistency=cached",
    "workspaceFolder": "/workdir/out-of-tree-driver-demo",
    "remoteUser": "user"
}
